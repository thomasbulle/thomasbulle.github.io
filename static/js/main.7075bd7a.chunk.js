(this["webpackJsonphenri-potier"]=this["webpackJsonphenri-potier"]||[]).push([[0],{141:function(e){e.exports=JSON.parse('{"header.altLogo":"Logo Henri Potier","header.altCartIcon":"Panier","header.cartPopover.title":"Panier","header.localeFlag.title.fr":"Francais","header.localeFlag.title.en":"Anglais","header.changeLocale":"Bienvenue sur la version fran\xe7aise !","cartPopover.buttonSeeCart":"Voir mon panier","cartPopover.emptyCart":"Panier vide","cartPopover.footer.totalPrice":"Total","cardItem.addToCartButton":"Ajouter au panier","cardItem.seeMore":"Voir plus","cardItem.seeLess":"Voir moins","cart.title":"Panier","cartItemsTable.column.title.name":"Produit","cartItemsTable.column.title.price":"Prix unitaire","cartItemsTable.column.title.quantity":"Quantit\xe9","cartItemsTable.column.title.actions":"Actions","cartItemsTable.tableFooter.offers":"R\xe9duction appliqu\xe9e","cartItemsTable.applicatedOffer.slice":"{value}\u20ac offerts par tranche de {sliceValue}\u20ac d\'achat","cartItemsTable.applicatedOffer.any":"Aucune","cartItemsTable.tableFooter.subtotal":"Sous-total","cartItemsTable.deleteItem.tooltip":"Supprimer","itemDetail.backToHome":"Retour","searchForm.placeholder":"Rechercher","cart.confirmCommand":"Valider","cart.modalConfirmCommand.title.load":"Validation en cours","cart.modalConfirmCommand.title.validated":"Commande valid\xe9e !","home.bodyTitle":"Liste des livres","home.intro":"Bienvenue sur le site e-commerce r\xe9serv\xe9 \xe0 la vente des livres Henri Potier.<br /><br />Parce que c\'est gr\xe2ce \xe0 vous, lecteurs, que l\'histoire de ce h\xe9ro est devenu mondialement connue, vous b\xe9n\xe9ficiez d\'offres exclusives et incontournables sur l\'achat des ces livres.<br />A vous de trouver l\'offre la plus avantageuse&nbsp;...","loader.text":"Chargement"}')},142:function(e){e.exports=JSON.parse('{"header.altLogo":"Henri Potier logo","header.altCartIcon":"Cart","header.cartPopover.title":"Cart","header.localeFlag.title.fr":"French","header.localeFlag.title.en":"English","header.changeLocale":"Welcome to the english version !","cartPopover.buttonSeeCart":"See my cart","cartPopover.emptyCart":"Empty cart","cartPopover.footer.totalPrice":"Total","cardItem.addToCartButton":"Add to cart","cardItem.seeMore":"See more","cardItem.seeLess":"See less","cart.title":"Cart","cartItemsTable.column.title.name":"Products","cartItemsTable.column.title.price":"Price","cartItemsTable.column.title.quantity":"Quantity","cartItemsTable.column.title.actions":"Actions","cartItemsTable.tableFooter.offers":"Applicated offer","cartItemsTable.applicatedOffer.slice":"{value}\u20ac offered for every {sliceValue}\u20ac of purchase","cartItemsTable.applicatedOffer.any":"Any","cartItemsTable.tableFooter.subtotal":"Subtotal","cartItemsTable.deleteItem.tooltip":"Remove","itemDetail.backToHome":"Back","searchForm.placeholder":"Search","cart.confirmCommand":"Validate","cart.modalConfirmCommand.title.load":"Validation in progress","cart.modalConfirmCommand.title.validated":"Validated order !","home.bodyTitle":"List of books","home.intro":"Welcome on the e-shop reserved of the sale of Henri Potier books?<br/><br/>Because it\'s thanks to you, readers, that the story of this hero became world famous, you benefit from exclusive and essential offers on the purchase of these books.<br />It\'s up to you to find the most advantageous offer&nbsp;...","loader.text":"Loading"}')},165:function(e,t,a){e.exports=a(285)},170:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},198:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},285:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(27),s=a.n(c),l=(a(170),a(171),a(172),a(29)),i=a(293);const o={"fr-FR":a(141),"en-EN":a(142)};var m=Object(l.b)(e=>({locale:e.app.locale}))(({children:e,locale:t})=>n.a.createElement(i.a,{locale:t,messages:o[t]},e)),p=a(67),d=a(16);const u="ADD_ITEM_TO_CART",h="UPDATE_ITEM",E={items:[],total:0,applicatedOffer:null};var b=(e=E,t)=>{switch(t.type){case u:return Object(d.a)(Object(d.a)({},e),{},{items:[...e.items,Object(d.a)(Object(d.a)({},t.item),{},{quantity:1})]});case h:return Object(d.a)(Object(d.a)({},e),{},{items:[...e.items.slice(0,t.index),t.item,...e.items.slice(t.index+1)]});case"UPDATE_CART_TOTAL":return Object(d.a)(Object(d.a)({},e),{},{total:t.total});case"REMOVE_ITEM_IN_CART":return Object(d.a)(Object(d.a)({},e),{},{items:[...e.items.slice(0,t.index),...e.items.slice(t.index+1)]});case"UPDATE_APPLICATED_OFFER":return Object(d.a)(Object(d.a)({},e),{},{applicatedOffer:t.applicatedOffer});case"RESET_CART_TOTAL":return Object(d.a)(Object(d.a)({},e),{},{total:0,applicatedOffer:null});case"INJECT_CART":return Object(d.a)(Object(d.a)({},e),{},{items:t.cart});case"RESET_CART":return Object(d.a)(Object(d.a)({},e),{},{items:[],total:0,applicatedOffer:null});default:return e}};const f=Object.freeze({LESS:0,ADD:1}),v=Object.freeze({HOME:0,ITEM_DETAIL:1}),C=Object.freeze({XS:0,S:1,M:2}),I={locale:"fr-FR",items:[],screenSize:C.M,homePosition:{x:0,y:0}};var O=(e=I,t)=>{switch(t.type){case"ADD_ALL_ITEMS":return Object(d.a)(Object(d.a)({},e),{},{items:t.items});case"UPDATE_LOCALE":return Object(d.a)(Object(d.a)({},e),{},{locale:t.locale});case"UPDATE_SCREEN_SIZE":return Object(d.a)(Object(d.a)({},e),{},{screenSize:t.screenSize});case"UPDATE_HOME_POSITION":return Object(d.a)(Object(d.a)({},e),{},{homePosition:{x:t.x,y:t.y}});default:return e}};var T=Object(p.b)({cart:b,app:O,lastAction:function(e=null,t){return t}});const g=(e,t)=>({type:h,item:e,index:t}),S=e=>({type:"ADD_ALL_ITEMS",items:e}),y=e=>({type:"UPDATE_LOCALE",locale:e.includes("-")?e:"".concat(e,"-").concat(e.toUpperCase())}),N=e=>({type:"UPDATE_SCREEN_SIZE",screenSize:e}),A=(e,t)=>{let a=JSON.parse(JSON.stringify(e));return t===f.ADD?a=Object(d.a)(Object(d.a)({},a),{},{quantity:a.quantity+1}):t===f.LESS&&(a=Object(d.a)(Object(d.a)({},a),{},{quantity:a.quantity<=0?0:a.quantity-1})),a},_=(e,t)=>e.findIndex(e=>e.title===t.title)>-1,P=e=>e.quantity>1,j=(e,t)=>t.find(t=>t.title===e),k=(e,t)=>e-e*t/100,M=(e,t)=>e-t,D=(e,t,a)=>{const r=Math.floor(e/t);let n=e;if(n>0)for(let c=0;c>r;c++)n-=a;return n},w=e=>{let t=0;return e.forEach(e=>t+=e.quantity),t},R=(e,t,a)=>{if(_(t,a)){const r=t.findIndex(e=>e.title===a.title);e(g(A(t[r],f.ADD),r))}else e((e=>({type:u,item:e}))(a))},x=e=>{localStorage.setItem("cart",JSON.stringify(e))};var L=a(91),z=a.n(L);const F=(e,t)=>{let a=0;if(0===t.cart.items.length)e({type:"RESET_CART_TOTAL"});else{let r="https://henri-potier.techx.fr/books/";t.cart.items.forEach(e=>{for(let t=0;t<e.quantity;t++)r+="".concat(e.isbn,","),a+=e.price}),z.a.get("".concat(r.substring(0,r.length-1),"/commercialOffers")).then(t=>{const r=((e,t)=>{const a=[];return e.forEach(e=>{switch(e.type){case"percentage":a.push(Object(d.a)(Object(d.a)({},e),{},{priceWithOffer:k(t,e.value)}));break;case"minus":a.push(Object(d.a)(Object(d.a)({},e),{},{priceWithOffer:M(t,e.value)}));break;case"slice":a.push(Object(d.a)(Object(d.a)({},e),{},{priceWithOffer:D(t,e.sliceValue,e.value)}))}}),a.length?a.sort((e,t)=>e.priceWithOffer-t.priceWithOffer)[0]:t})(t.data.offers,a);e({type:"UPDATE_CART_TOTAL",total:r.priceWithOffer}),e({type:"UPDATE_APPLICATED_OFFER",applicatedOffer:r})}).catch(e=>console.log(e))}};var q=a(111),V=a.n(q),U=a(144),H=(a(195),a(90)),W=a(37),X=a(26),J=a(291),B={app:{locales:["fr","en"],responsiveSizes:{xs:375,s:840,m:1200}},cartItemsTable:{columns:{desktop:["name","price","quantity","actions"],mobile:["description"]}}},G=(a(196),a(289)),Q=a(296),Z=a(54),Y=a(295),K=(a(197),a(56)),$=(a(198),a(292)),ee=a(298),te=a(297);class ae extends r.Component{handleClickAddItem(){this.updateItem(f.ADD)}handleClickRemoveItem(){this.updateItem(f.LESS)}updateItem(e){const t=this.props,a=t.dispatch,r=t.itemsInCart,n=t.item,c=r.findIndex(e=>e.title===n.title);a(g(A(r[c],e),c))}render(){const e=this.props,t=e.item,a=e.className,r=e.screenSize;return n.a.createElement("div",{className:"ManageItemQuantity-wrapper ".concat(a)},n.a.createElement($.a.Group,{compact:!0},n.a.createElement(Z.a,{className:"button-minus",disabled:!P(t),onClick:()=>this.handleClickRemoveItem(),icon:n.a.createElement(ee.a,null),style:{width:"33%"},size:r===C.XS?"small":"middle"}),n.a.createElement($.a,{className:"input-quantity",value:t.quantity,disabled:!0,style:{width:"33%"},size:r===C.XS?"small":"middle"}),n.a.createElement(Z.a,{className:"button-plus",onClick:()=>this.handleClickAddItem(),icon:n.a.createElement(te.a,null),style:{width:"33%"},size:r===C.XS?"small":"middle"})))}}var re=Object(l.b)(({cart:e,app:t})=>({itemsInCart:e.items,screenSize:t.screenSize}))(ae);var ne=Object(l.b)(({cart:e})=>({items:e.items,cartTotal:e.total}))(({items:e,cartTotal:t,handleClickSeeCart:a})=>n.a.createElement("div",{className:"CartPopover-wrapper"},n.a.createElement("div",{className:"cart-content-container"},e.length>0?e.map((e,t)=>n.a.createElement("div",{className:"item-detail-container",key:t},n.a.createElement("img",{className:"cover-item-detail",src:e.cover,alt:e.title}),n.a.createElement("div",{key:t,className:"item-detail"},n.a.createElement("span",{className:"item-title"},e.title),n.a.createElement("div",{className:"price-quantity-container"},n.a.createElement("span",{className:"single-price"},e.price,"\u20ac"),n.a.createElement(re,{className:"quantity-container-popover",item:e}))))):n.a.createElement(K.a,{description:n.a.createElement(G.a,{id:"cartPopover.emptyCart"}),image:K.a.PRESENTED_IMAGE_SIMPLE})),n.a.createElement("div",{className:"footer-popover"},n.a.createElement("span",{className:"total-price"},n.a.createElement(G.a,{id:"cartPopover.footer.totalPrice"}),"\xa0:\xa0",t,"\u20ac"),n.a.createElement(W.b,{to:"/cart"},n.a.createElement(Z.a,{onClick:()=>a()},n.a.createElement(G.a,{id:"cartPopover.buttonSeeCart"}))))));class ce extends r.Component{constructor(e){super(e),this.state={isOpenPopoverCart:!1}}getClassNameShopCart(e){if([u,h].includes(e))return"animate"}render(){const e=this.state.isOpenPopoverCart,t=this.props,a=t.dispatch,r=t.intl,c=t.itemsInCart,s=t.lastAction,l=t.screenSize;return n.a.createElement("div",{className:"Header-wrapper"},n.a.createElement("div",{className:"locale-container"},B.app.locales.map((e,t)=>n.a.createElement("span",{key:t,className:"locale ".concat(e),onClick:()=>a(y(e)),title:r.formatMessage({id:"header.localeFlag.title.".concat(e)})},n.a.createElement("img",{className:"locale-flag",src:"ressources/images/".concat(e,".png"),alt:e})))),n.a.createElement("div",{className:"logo-container"},n.a.createElement(W.b,{to:"/"},n.a.createElement("img",{className:"logo-img",src:"https://fontmeme.com/permalink/210115/af584580b184245e64544f22a3a395df.png",border:"0",alt:r.formatMessage({id:"header.altLogo"})}))),n.a.createElement("div",{className:"cart-container"},n.a.createElement(Q.a,{visible:e,content:n.a.createElement(ne,{handleClickSeeCart:()=>this.setState({isOpenPopoverCart:!1})}),trigger:"click",title:n.a.createElement(G.a,{id:"header.cartPopover.title"}),placement:"bottomRight",onVisibleChange:e=>this.setState({isOpenPopoverCart:e})},n.a.createElement(Z.a,{className:"cart-button ".concat(this.getClassNameShopCart(s)),type:"link",onClick:()=>this.setState({isOpenPopoverCart:!e})},n.a.createElement(Y.a,{count:w(c),size:l===C.XS?"small":"default"},n.a.createElement("img",{className:"card-icon",src:"ressources/images/shopping-cart.png",alt:r.formatMessage({id:"header.altCartIcon"})}))))))}}var se=Object(l.b)(({cart:e,lastAction:t,app:a})=>({itemsInCart:e.items,lastAction:t.type,screenSize:a.screenSize}))(Object(H.c)(ce)),le=(a(200),a(201),a(294)),ie=a(299),oe=a(150);class me extends r.Component{constructor(e){super(e),this.state={canSeeMore:!1,isOpenCover:!1}}componentDidMount(){this.props.parent===v.ITEM_DETAIL&&this.setState({canSeeMore:!0})}getClassNameByParent(){switch(this.props.parent){case v.HOME:return"cardItem-home-wrapper";case v.ITEM_DETAIL:return"cardItem-itemDetail-wrapper";default:return""}}truncateSynopsis(){const e=this.state.canSeeMore,t=this.props.item;if(e)return t.synopsis.join(" ");{const e=t.synopsis[0];if(e.length<=250)return e;const a=e.substr(0,249);return a.substr(0,a.lastIndexOf(" "))+" &hellip;"}}render(){const e=this.state.isOpenCover,t=this.props,a=t.item,r=t.itemsInCart,c=t.handleClickAddToCart,s=t.parent;return n.a.createElement("div",{className:"CardItem-wrapper ".concat(this.getClassNameByParent())},n.a.createElement(W.b,{to:"/detail/".concat(a.isbn)},n.a.createElement("span",{className:"cardItem-title"},a.title)),n.a.createElement("div",{className:"text-container"},n.a.createElement("div",{className:"cover-container",onClick:()=>this.setState({isOpenCover:!0})},n.a.createElement("img",{className:"cardItem-cover",src:a.cover,alt:a.title}),n.a.createElement(ie.a,{className:"icon-zoom"})),n.a.createElement("p",{className:"cardItem-synopsis-container"},n.a.createElement("span",{className:"cardItem-synopsis",dangerouslySetInnerHTML:{__html:this.truncateSynopsis()}}),s===v.HOME&&n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement(W.b,{to:"/detail/".concat(a.isbn)},n.a.createElement("span",{className:"see-more-synopsis"},n.a.createElement(G.a,{id:"cardItem.seeMore"})))))),n.a.createElement("div",{className:"cardItem-footer"},n.a.createElement("div",{className:"rate-container"},n.a.createElement(le.a,{disabled:!0,allowHalf:!0,defaultValue:a.rate,className:"rate-card-item"}),n.a.createElement("span",null,"(",a.comments,")")),n.a.createElement("div",{className:"cardItem-price-container"},n.a.createElement("span",{className:"cardItem-price"},a.price," \u20ac"),_(r,a)?n.a.createElement(re,{item:j(a.title,r)}):n.a.createElement(Z.a,{onClick:c},n.a.createElement(G.a,{id:"cardItem.addToCartButton"})))),e&&n.a.createElement(oe.a,{mainSrc:a.cover,onCloseRequest:()=>this.setState({isOpenCover:!1}),imageTitle:a.title}))}}var pe=me;a(211);const de=$.a.Search;class ue extends r.Component{handleSearch(e){const t=this.props,a=t.items;(0,t.getFilteredItems)(a.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())))}render(){const e=this.props.intl;return n.a.createElement(de,{placeholder:e.formatMessage({id:"searchForm.placeholder"}),allowClear:!0,onSearch:e=>this.handleSearch(e),onChange:e=>this.handleSearch(e.target.value),style:{width:250}})}}var he=Object(H.c)(ue);a(212);var Ee=()=>n.a.createElement("div",{className:"Loader-wrapper"},n.a.createElement("span",{className:"loader-text"},n.a.createElement(G.a,{id:"loader.text"})),n.a.createElement("div",{className:"lds-ellipsis"},n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null),n.a.createElement("div",null)));class be extends r.Component{constructor(e){super(e),this.state={filteredItems:[]}}componentDidMount(){const e=this.props,t=e.items,a=e.homePosition;window.scrollTo(a.x,a.y),this.setState({filteredItems:t})}componentDidUpdate(e){const t=this.props.items;e.items.length!==t.length&&this.setState({filteredItems:t})}componentWillUnmount(){var e,t;(0,this.props.dispatch)((e=0,t=window.scrollY,{type:"UPDATE_HOME_POSITION",x:e,y:t}))}render(){const e=this.state.filteredItems,t=this.props,a=t.intl,r=t.dispatch,c=t.items,s=t.itemsInCart;return n.a.createElement("div",{className:"Home-wrapper"},n.a.createElement("p",{className:"home-intro",dangerouslySetInnerHTML:{__html:a.formatMessage({id:"home.intro"})}}),n.a.createElement("div",{className:"title-container"},n.a.createElement("h2",{className:"header-title"},n.a.createElement(G.a,{id:"home.bodyTitle"})),n.a.createElement(he,{items:c,getFilteredItems:e=>this.setState({filteredItems:e})})),n.a.createElement("div",{className:"home-container"},c.length?e.map((e,t)=>n.a.createElement(pe,{key:t,item:e,itemsInCart:s,handleClickAddToCart:()=>R(r,s,e),parent:v.HOME})):n.a.createElement(Ee,null)))}}var fe=Object(l.b)(({app:e,cart:t})=>({items:e.items,itemsInCart:t.items,homePosition:e.homePosition}))(Object(H.c)(be)),ve=(a(213),a(83));class Ce extends r.Component{componentDidMount(){window.scrollTo(0,0)}render(){const e=this.props,t=e.dispatch,a=e.items,r=e.itemsInCart,c=e.match.params.id,s=a.find(e=>e.isbn===c);return s?n.a.createElement("div",{className:"ItemDetail-wrapper"},n.a.createElement(Z.a,{type:"link",onClick:()=>this.props.history.push("/"),icon:n.a.createElement(ve.a,null),className:"button-back"},n.a.createElement(G.a,{id:"itemDetail.backToHome"})),n.a.createElement(pe,{item:s,itemsInCart:r,handleClickAddToCart:()=>R(t,r,s),parent:v.ITEM_DETAIL})):null}}var Ie=Object(l.b)(({app:e,cart:t})=>({items:e.items,itemsInCart:t.items}))(Ce),Oe=(a(214),a(60)),Te=a(290),ge=a(300);class Se extends r.Component{handleClickRemoveItem(e){const t=this.props,a=t.dispatch,r=t.itemsInCart.findIndex(t=>t.title===e);r>-1&&a((e=>({type:"REMOVE_ITEM_IN_CART",index:e}))(r))}getColumns(){const e=this.props,t=e.intl,a=e.itemsInCart;return e.screenSize===C.XS?B.cartItemsTable.columns.mobile.map(e=>{const t={title:"",dataIndex:e,key:e};switch(e){case"description":t.render=(e,t)=>this.getMobileDescription(t)}return t}):B.cartItemsTable.columns.desktop.map(e=>{const r={title:t.formatMessage({id:"cartItemsTable.column.title.".concat(e)}),dataIndex:e,key:e};switch(e){case"name":r.render=(e,t)=>n.a.createElement(W.b,{to:"/detail/".concat(t.id)},n.a.createElement("img",{className:"img-name-table",src:t.cover,alt:t.name}),n.a.createElement("span",null,e));break;case"price":r.render=e=>n.a.createElement("span",null,e,"\u20ac");break;case"quantity":r.render=(e,t)=>n.a.createElement(re,{item:j(t.name,a)});break;case"actions":r.render=(e,a)=>n.a.createElement(Oe.a,{title:t.formatMessage({id:"cartItemsTable.deleteItem.tooltip"}),placement:"bottomRight"},n.a.createElement(Z.a,{type:"primary",danger:!0,className:"delete-item-button",onClick:()=>this.handleClickRemoveItem(a.name)},n.a.createElement(ge.a,null)))}return r})}getMobileDescription(e){const t=this.props,a=t.itemsInCart,r=t.intl;return n.a.createElement("div",{className:"mobile-description-wrapper"},n.a.createElement("div",{className:"mobile-cover-container"},n.a.createElement(W.b,{to:"/detail/".concat(e.id)},n.a.createElement("img",{className:"img-name-table",src:e.cover,alt:e.name}))),n.a.createElement("div",{className:"mobile-description-container"},n.a.createElement("span",{className:"mobile-description-title"},e.name),n.a.createElement("span",{className:"mobile-description-price"},e.quantity," x ",e.price,"\u20ac"),n.a.createElement("div",{className:"quantity-actions-container"},n.a.createElement(re,{item:j(e.name,a)}),n.a.createElement(Oe.a,{title:r.formatMessage({id:"cartItemsTable.deleteItem.tooltip"}),placement:"bottomRight"},n.a.createElement(Z.a,{type:"primary",danger:!0,className:"delete-item-button",onClick:()=>this.handleClickRemoveItem(e.name),size:"small"},n.a.createElement(ge.a,null))))))}getDataSource(){return this.props.itemsInCart.map((e,t)=>({key:t,name:e.title,price:e.price,quantity:e.quantity,id:e.isbn,cover:e.cover}))}getTableFooter(){const e=this.props,t=e.cartTotal,a=e.applicatedOffer,r=e.itemsInCart;return n.a.createElement("div",{className:"footer-table"},n.a.createElement("div",{className:"subtotal-container"},n.a.createElement("span",{className:"subtotal-label"},n.a.createElement(G.a,{id:"cartItemsTable.tableFooter.subtotal"}),"\xa0:\xa0"),n.a.createElement("span",null,(e=>{let t=0;return e.forEach(e=>{if(e.quantity>1)for(let a=0;a<e.quantity;a++)t+=e.price;else t+=e.price}),t})(r))),n.a.createElement("div",{className:"offer-container"},n.a.createElement("span",{className:"offer-label"},n.a.createElement(G.a,{id:"cartItemsTable.tableFooter.offers"}),"\xa0:\xa0"),n.a.createElement("span",null,this.getApplicatedOfferText(a))),n.a.createElement("div",{className:"total-container"},n.a.createElement("span",null,"Total : "),n.a.createElement("span",null,t,"\u20ac")))}getApplicatedOfferText(e){const t=this.props.intl;if(!e)return t.formatMessage({id:"cartItemsTable.applicatedOffer.any"});switch(e.type){case"percentage":return n.a.createElement("span",null,e.value,"%");case"minus":return n.a.createElement("span",null,"-",e.value,"\u20ac");case"slice":return n.a.createElement("span",null,n.a.createElement(G.a,{id:"cartItemsTable.applicatedOffer.slice",values:{sliceValue:e.sliceValue,value:e.value}}));default:return""}}render(){return n.a.createElement("div",{className:"cartItemsTable-wrapper"},n.a.createElement(Te.a,{columns:this.getColumns(),dataSource:this.getDataSource(),pagination:!1,footer:()=>this.getTableFooter(),locale:{filterConfirm:"Ok",filterReset:"Reset",emptyText:n.a.createElement(K.a,{description:n.a.createElement(G.a,{id:"cartPopover.emptyCart"}),image:K.a.PRESENTED_IMAGE_SIMPLE})}}))}}var ye=Object(l.b)(({cart:e,app:t})=>({itemsInCart:e.items,cartTotal:e.total,applicatedOffer:e.applicatedOffer,screenSize:t.screenSize}))(Object(H.c)(Se));class Ne extends r.Component{constructor(e){super(e),this.state={validatedCommand:!1}}componentDidMount(){this.props.itemsInCart.length<=0&&this.setState({validatedCommand:!0})}componentDidUpdate(e){const t=this.state.validatedCommand,a=this.props.itemsInCart;e.itemsInCart!==a&&a.length<=0&&!t?this.setState({validatedCommand:!0}):e.itemsInCart!==a&&a.length>0&&t&&this.setState({validatedCommand:!1})}handleClickValidate(){const e=this.props,t=e.intl,a=e.history,r=e.dispatch;this.setState({validatedCommand:!0}),J.b.loading(t.formatMessage({id:"cart.modalConfirmCommand.title.load"}),2).then(()=>{J.b.success(t.formatMessage({id:"cart.modalConfirmCommand.title.validated"}),2).then(()=>{a.push("/"),r({type:"RESET_CART"})})})}render(){const e=this.state.validatedCommand,t=this.props.screenSize;return n.a.createElement("div",{className:"Cart-wrapper"},n.a.createElement("h2",{className:"cart-title"},n.a.createElement(G.a,{id:"cart.title"})),n.a.createElement(ye,null),n.a.createElement(Z.a,{size:t===C.XS?"middle":"large",disabled:e,onClick:()=>this.handleClickValidate()},n.a.createElement(G.a,{id:"cart.confirmCommand"})))}}var Ae=Object(l.b)(({cart:e,app:t})=>({itemsInCart:e.items,screenSize:t.screenSize}))(Object(H.c)(Object(X.f)(Ne)));class _e extends r.Component{componentDidMount(){const e=this.props.dispatch;window.addEventListener("resize",()=>this.getScreenSize()),this.getScreenSize(),e(y(navigator.language||"fr-FR")),z.a.get("https://henri-potier.techx.fr/books").then(function(){var t=Object(U.a)(V.a.mark((function t(a){var r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.data.map(e=>Object(d.a)(Object(d.a)({},e),{},{rate:3*Math.random()+3,comments:Math.ceil(26*Math.random()+5)}));case 2:r=t.sent,e(S(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(e=>console.error(e));const t=localStorage.getItem("cart");t&&JSON.parse(t).length&&e({type:"INJECT_CART",cart:JSON.parse(t)})}componentDidUpdate(e){const t=this.props,a=t.locale,r=t.intl;e.locale!==a&&J.b.info(r.formatMessage({id:"header.changeLocale"}))}componentWillUnmount(){const e=this.props.itemsInCart;x(e)}getScreenSize(){const e=this.props,t=e.dispatch,a=e.screenSize;window.innerWidth<B.app.responsiveSizes.s&&a!==C.XS?t(N(C.XS)):window.innerWidth>B.app.responsiveSizes.s&&a!==C.S?t(N(C.S)):window.innerWidth>B.app.responsiveSizes.m&&a!==C.M&&t(N(C.M))}render(){return n.a.createElement(W.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(se,null),n.a.createElement("div",{className:"app-body"},n.a.createElement(X.c,null,n.a.createElement(X.a,{path:"/detail/:id",render:e=>n.a.createElement(Ie,e)}),n.a.createElement(X.a,{path:"/cart"},n.a.createElement(Ae,null)),n.a.createElement(X.a,{path:"/"},n.a.createElement(fe,null))),n.a.createElement("p",{className:"copyright"},"\xa9 Thomas Bulle"))))}}var Pe=Object(l.b)(({cart:e,app:t})=>({itemsInCart:e.items,screenSize:t.screenSize,locale:t.locale}))(Object(H.c)(_e));const je=Object(p.c)(T,window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():e=>e);je.subscribe(()=>(e=>{const t=e.getState();switch(t.lastAction.type){case u:case h:case"REMOVE_ITEM_IN_CART":case"INJECT_CART":F(e.dispatch,t),x(t.cart.items);break;case"RESET_CART":x(t.cart.items);break;default:return t}})(je)),s.a.render(n.a.createElement(l.a,{store:je},n.a.createElement(m,null,n.a.createElement(Pe,null))),document.getElementById("root"))}},[[165,1,2]]]);
//# sourceMappingURL=main.7075bd7a.chunk.js.map